{"version":3,"sources":["components/Drawer.jsx","assets/svg/image.svg","components/ImageLoader.jsx","helpers.js","components/BookUpdate.jsx","components/Book.jsx","components/Empty.jsx","components/BooksList.jsx","App.js","index.js"],"names":["Drawer","isOpen","close","children","handleEscape","useCallback","evt","key","useEffect","window","addEventListener","removeEventListener","className","onKeyDown","onClick","ImageLoader","image","getImage","infoMessage","src","IconImage","alt","type","accept","name","id","onChange","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","toBase64","target","files","then","data","BookUpdate","removeButton","title","author","addBook","editBook","removeBook","useState","newImage","setNewImage","newTitle","setNewTitle","newAuthor","setNewAuthor","onSubmit","preventDefault","newBook","nanoid","htmlFor","required","value","Book","onClickBook","width","height","Empty","BooksList","books","length","map","book","App","setBooks","added","setAdded","currentBook","setCurrentBook","localBooks","localStorage","getItem","JSON","parse","setItem","stringify","prevBooks","concat","b","confirm","filter","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d442bd5c.chunk.js","sourcesContent":["import React, { useEffect, useCallback } from 'react';\n\nfunction Drawer({ isOpen = false, close, children }) {\n  const handleEscape = useCallback(\n    (evt) => {\n      if (evt.key === 'Escape') {\n        close();\n      }\n    },\n    [close]\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleEscape);\n\n    return () => {\n      window.removeEventListener('keydown', handleEscape);\n    };\n  }, [handleEscape]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"drawer\"\n      onKeyDown={(evt) => (evt.key === 'Escape' ? close() : null)}\n    >\n      <div className=\"drawer__overlay\" onClick={() => close()}></div>\n      <div className=\"drawer__box\">{children}</div>\n    </div>\n  );\n}\n\nexport default Drawer;\n","export default __webpack_public_path__ + \"static/media/image.4b683733.svg\";","import React from 'react';\nimport IconImage from '../assets/svg/image.svg';\nimport { toBase64 } from '../helpers';\n\nfunction ImageLoader({ image, getImage }) {\n  function handleChange(evt) {\n    const file = evt.target.files[0];\n\n    toBase64(file).then((data) => getImage(data));\n  }\n\n  const infoMessage = (\n    <span className=\"image-loader__info\">\n      Нажми на значок чтобы добавить картинку\n    </span>\n  );\n\n  return (\n    <label className=\"image-loader\">\n      <img className=\"image-loader__image\" src={image || IconImage} alt=\"\" />\n\n      {image ? null : infoMessage}\n\n      <input\n        className=\"image-loader__input\"\n        type=\"file\"\n        accept=\".jpg, .jpeg, .png, .svg\"\n        name=\"image\"\n        id=\"image\"\n        onChange={handleChange}\n      />\n    </label>\n  );\n}\n\nexport default ImageLoader;\n","export const toBase64 = (file) =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n","import React, { useState } from 'react';\nimport { nanoid } from 'nanoid';\nimport ImageLoader from './ImageLoader';\n\nfunction BookUpdate({\n  id,\n  image = null,\n  title = '',\n  author = '',\n  addBook,\n  editBook,\n  removeBook,\n}) {\n  const [newImage, setNewImage] = useState(image);\n  const [newTitle, setNewTitle] = useState(title);\n  const [newAuthor, setNewAuthor] = useState(author);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    const newBook = {\n      id,\n      image: newImage,\n      title: newTitle,\n      author: newAuthor,\n    };\n\n    if (id) {\n      editBook(newBook);\n    } else {\n      addBook({\n        ...newBook,\n        id: nanoid(),\n      });\n    }\n\n    setNewTitle('');\n  }\n\n  let removeButton;\n  if (id) {\n    removeButton = (\n      <button\n        className=\"button-secondary\"\n        type=\"button\"\n        onClick={() => removeBook(id)}\n      >\n        Удалить\n      </button>\n    );\n  }\n\n  return (\n    <form className=\"book-add form\" onSubmit={handleSubmit}>\n      <ImageLoader image={newImage} getImage={setNewImage} />\n\n      <div className=\"form__field\">\n        <label className=\"label\" htmlFor=\"title\">\n          Название\n        </label>\n        <input\n          className=\"input\"\n          type=\"text\"\n          name=\"title\"\n          id=\"title\"\n          required\n          value={newTitle}\n          onChange={(evt) => setNewTitle(evt.target.value)}\n        />\n      </div>\n\n      <div className=\"form__field\">\n        <label className=\"label\" htmlFor=\"author\">\n          Автор\n        </label>\n        <input\n          className=\"input\"\n          type=\"text\"\n          name=\"author\"\n          id=\"author\"\n          value={newAuthor}\n          onChange={(evt) => setNewAuthor(evt.target.value)}\n        />\n      </div>\n\n      <div className=\"book-add__buttons\">\n        <button className=\"form__submit button-primary\">Готово</button>\n        {removeButton}\n      </div>\n    </form>\n  );\n}\n\nexport default BookUpdate;\n","import React from 'react';\nimport IconImage from '../assets/svg/image.svg';\n\nfunction Book({ id, image, title, author, onClickBook }) {\n  function handleClick() {\n    onClickBook({ id, image, title, author });\n  }\n\n  return (\n    <article className=\"book\" onClick={handleClick}>\n      <header className=\"book__header\">\n        <img\n          className=\"book__image\"\n          src={image || IconImage}\n          alt={title}\n          width={image ? 145 : 40}\n          height={image ? 205 : 40}\n        />\n      </header>\n\n      <h3 className=\"book__title\">{title}</h3>\n      <p className=\"book__author\">{author || 'без автора'}</p>\n    </article>\n  );\n}\n\nexport default Book;\n","import React from 'react';\n\nfunction Empty() {\n  return (\n    <p className=\"empty\">\n      <span className=\"empty__smile\">¯\\_(ツ)_/¯</span>\n      <span className=\"empty__text\">\n        Здесь пока пусто, добавьте что-нибудь !\n      </span>\n    </p>\n  );\n}\n\nexport default Empty;\n","import React from 'react';\nimport Book from './Book';\nimport Empty from './Empty';\n\nfunction BooksList({ books, onClickBook }) {\n  if (!books.length) {\n    return <Empty />;\n  }\n\n  return (\n    <div className=\"books-list\">\n      {books.map((book) => (\n        <Book key={book.id} onClickBook={onClickBook} {...book} />\n      ))}\n    </div>\n  );\n}\n\nexport default BooksList;\n","import React, { useState, useEffect } from 'react';\nimport Drawer from './components/Drawer';\nimport BookUpdate from './components/BookUpdate';\nimport BooksList from './components/BooksList';\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n  const [added, setAdded] = useState(false);\n  const [currentBook, setCurrentBook] = useState({});\n\n  useEffect(() => {\n    const localBooks = window.localStorage.getItem('books');\n\n    if (localBooks) {\n      setBooks(JSON.parse(localBooks));\n    }\n  }, []);\n\n  useEffect(() => {\n    window.localStorage.setItem('books', JSON.stringify(books));\n  }, [books]);\n\n  function addBook(book) {\n    setBooks((prevBooks) => prevBooks.concat(book));\n    setAdded(false);\n  }\n\n  function editBook(book) {\n    setBooks((prevBooks) =>\n      prevBooks.map((b) => {\n        if (b.id === book.id) {\n          return { ...book };\n        }\n\n        return b;\n      })\n    );\n    setAdded(false);\n  }\n\n  function removeBook(id) {\n    const verification = window.confirm('Точно при точно удаляем ?');\n\n    if (!verification) return;\n\n    setBooks((prevBooks) => prevBooks.filter((b) => b.id !== id));\n    setAdded(false);\n  }\n\n  function handleAddBookButton() {\n    setCurrentBook({});\n    setAdded(true);\n  }\n\n  function handleBook(book) {\n    setCurrentBook(book);\n    setAdded(true);\n  }\n\n  return (\n    <>\n      <header className=\"header\">\n        <div className=\"header__inner container\">\n          <button\n            className=\"header__button-add button-primary\"\n            onClick={handleAddBookButton}\n          >\n            Добавить книгу\n          </button>\n        </div>\n      </header>\n\n      <main className=\"container\">\n        <h1 className=\"page-title\">Домашняя библиотека</h1>\n\n        <BooksList books={books} onClickBook={handleBook} />\n      </main>\n\n      <Drawer isOpen={added} close={() => setAdded(false)}>\n        <BookUpdate\n          {...currentBook}\n          addBook={addBook}\n          editBook={editBook}\n          removeBook={removeBook}\n        />\n      </Drawer>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}